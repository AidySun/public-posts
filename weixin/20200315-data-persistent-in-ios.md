# iOS上的数据持久化概述
应用程序通常会创建应该保存的数据。本文将概要描述iOS上实现数据持久性的各种可能方式。

## UserDefaults

`UserDefaults` 是保存少量数据的好方法。例如，这可能是用户在应用程序中选择的一些设置。但它并不打算保存大量用户生成的数据。

以下类的实例可以通过使用`UserDefaults`来保存:`NSData`, `NSString`, `NSNumber`, `NSData`, `NSArray` 和 `NSDictionary`。但是也可以在`UserDefaults` 中保存一些简单的类型，比如 `bools` 和 `integers`。

## Keychain

和 MacOS 一样，iOS 上也有一个 keychain 。这是一个非常安全的位置，以安全的高敏感数据，如登录数据和密码。API 偏底层，但是苹果已经做了一个很好的 Objective-C 的封装。它不是 ARC 代码。所以为了使用它，你必须对这些源文件禁用 ARC。

## Sqlite数据库

如果您的应用程序有大量的结构化数据，那么数据库可能是最好的方法。稍后将讨论iOS提供的用来处理用户数据的 `CoreData` 。

如果开发的平台不止一个，那么在所有设备上共享相同的数据库结构可能是一个好主意，特别是如果数据库不仅应该包含用户生成的数据，还应该包含其他数据，比如产品目录。

因此，如果希望自己处理 sqlite 数据库，可以使用 `sqlite3 C` 库，它非常轻量级、快速和可靠。

## CoreData

`Core Data` 是苹果的持久性框架。它基于描述应该保存的对象的对象图。开发者可以直接使用这些对象，框架会负责将其保存到数据库中。

开始时使用 `CoreData` 非常复杂。但它值得学习，因为它提供了很多便利性。例如，您可以执行撤消和重做操作。它的性能也很好，支持延迟加载数据。

## 保存文件

当然，您也可以直接将所有类型的文件保存到文件系统中。但是，由于安全原因，您只能访问app容器中的文件系统。基本上有三个文件夹内的应用程序容器:

- `Documents`：这是保存用户生成内容的最佳位置。它还自动备份到 iCloud。
- `Library`：在这个文件夹中，你可以放置用户没有生成的文件，这些文件应该在应用程序启动之间保持。但是，当设备没有足够的空闲空间时，一些文件可能会被删除。库文件夹中有一些用于不同目的的子文件夹。更多细节请看iOS文件系统基础文档。
- `tmp`：在这个文件夹里，你可以暂时保存应用程序需要的文件。当应用程序不运行时，操作系统可以删除它们。

`NSData` 类提供了读写功能。

原文：http://www.thomashanning.com/data-persistence-ios/

